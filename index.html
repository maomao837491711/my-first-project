<!DOCTYPE html>  
<html lang="zh-CN">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">  
    <title>å¸‚åœºå‘¨æœŸç›‘æ§</title>  
      
    <!--   
       âœ… æœ€ç»ˆé…ç½®ï¼š  
       ç›´æ¥å¼•ç”¨ä½ åˆšåˆšä¸Šä¼ çš„ jianbanlogo3.png  
       å®Œå…¨å®‰å…¨ï¼Œä¸ä¾èµ–ç¬¬ä¸‰æ–¹  
    -->  
    <link rel="icon" href="https://maomao837491711.github.io/jianban/jianbanlogo3.png">  
    <link rel="apple-touch-icon" sizes="180x180" href="https://maomao837491711.github.io/jianban/jianbanlogo3.png">  
      
    <meta name="apple-mobile-web-app-capable" content="yes">  
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">  
    <meta name="theme-color" content="#0d1117">  
  
    <style>  
        body { background-color: #0d1117; color: #c9d1d9; font-family: -apple-system, "SF Pro Text", sans-serif; margin: 0; padding: 20px 15px; display: flex; flex-direction: column; align-items: center; }  
        h1 { font-size: 1.2rem; margin-bottom: 20px; display: flex; align-items: center; gap: 8px; }  
        .container { width: 100%; max-width: 600px; display: flex; flex-direction: column; gap: 15px; }  
          
        .card { background: #161b22; border: 1px solid #30363d; border-radius: 12px; padding: 15px 20px; position: relative; overflow: hidden; }  
        .pred-card { border: 1px solid #d29922; background: linear-gradient(180deg, rgba(210, 153, 34, 0.05) 0%, #161b22 100%); }  
          
        .row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.05); align-items: center; font-size: 0.9rem; }  
        .row:last-child { border-bottom: none; }  
        .label { color: #8b949e; }  
        .val { font-family: monospace; font-weight: bold; color: #e6edf3; }  
          
        /* é¢œè‰²é…ç½® */  
        .green { color: #3fb950 !important; }  
        .red { color: #ff7b72 !important; }  
        .gold { color: #d29922 !important; }  
        .white { color: #ffffff !important; }  
        /* é²œçº¢è‰² */  
        .bright-red { color: #ff3333 !important; text-shadow: 0 0 10px rgba(255, 51, 51, 0.2); }  
          
        .progress-box { margin-top: 12px; background: #21262d; border-radius: 6px; height: 8px; overflow: hidden; width: 100%; }  
        .progress-fill { height: 100%; border-radius: 6px; transition: width 1s; display: block; }  
          
        .bg-btc { background-color: #f7931a !important; }  
        .bg-ltc { background-color: #345d9d !important; }  
          
        .timer-box { background: rgba(0,0,0,0.2); margin-top: 15px; padding: 15px; border-radius: 8px; text-align: center; border: 1px solid #30363d; }  
        .big-time { font-size: 1.5rem; font-weight: 800; color: #58a6ff; margin: 5px 0; letter-spacing: 0.5px; font-family: monospace; }  
          
        .btn { margin-top: 30px; padding: 12px 30px; background: #238636; color: white; border: none; border-radius: 8px; font-weight: bold; font-size: 1rem; cursor: pointer; transition: all 0.3s; }  
        .btn:active { transform: scale(0.95); }  
        .btn:disabled { background: #30363d; color: #8b949e; cursor: not-allowed; }  
        .tip { font-size: 12px; color: #484f58; margin-top: 10px; }  
          
        .card.btc { border-left: 4px solid #f7931a; }  
        .card.ltc { border-left: 4px solid #345d9d; }  
    </style>  
</head>  
<body>  
  
    <h1>ğŸ“Š å¸‚åœºå‘¨æœŸç›‘æ§</h1>  
  
    <div class="container">  
        <div class="card pred-card">  
            <div class="row" style="border-bottom:none; padding-bottom:15px;">  
                <span class="gold">ğŸ”® å‘¨æœŸé¢„æµ‹</span>  
                <span id="today-date" style="font-size:0.8rem; color:#8b949e">--/--</span>  
            </div>  
            <div class="row"><span class="label">ğŸ‚ ç‰›å¸‚é¡¶ç‚¹æ—¥æœŸ</span><span class="val green">2025-10-06</span></div>  
            <div class="row"><span class="label">ğŸ» ç†Šå¸‚ä½ç‚¹æ—¥æœŸ</span><span class="val red">2026-10-05</span></div>  
            <div class="row"><span class="label">ğŸ“ˆ æœ¬è½®ç‰›å¸‚æœ€é«˜ä»·</span><span class="val green">126,199 U</span></div>  
            <div class="row"><span class="label">ğŸ“‰ é¢„æµ‹ç†Šå¸‚ä½ç‚¹ (-70%)</span><span class="val red">38,000 U</span></div>  
              
            <div style="margin:10px 0; border-top:1px dashed #30363d"></div>  
              
            <div class="row"><span class="label">è·ç¦»ç‰›å¸‚é¡¶ç‚¹å·²è¿‡</span><span class="val" id="peak-days">--</span></div>  
            <div class="row"><span class="label">è·ç¦»ç†Šå¸‚ä½ç‚¹</span><span class="val white" id="bear-days">--</span></div>  
            <div class="row"><span class="label">è·ç¦»æœ€ä½ç‚¹è¿˜å·®</span><span class="val bright-red" id="price-gap">è®¡ç®—ä¸­...</span></div>  
        </div>  
  
        <div id="app"></div>  
    </div>  
  
    <button id="refresh-btn" class="btn" onclick="refreshData()">ğŸ”„ åˆ·æ–°æ•°æ®</button>  
    <div class="tip">æ¯ 10 åˆ†é’Ÿè‡ªåŠ¨åˆ·æ–°</div>  
  
    <script>  
        function updateDate() {  
            var now = new Date();  
            document.getElementById('today-date').innerText = now.toLocaleDateString('zh-CN');  
  
            var bullDate = new Date("2025-10-06").getTime();  
            var bearDate = new Date("2026-10-05").getTime();  
            var today = now.getTime();  
            var oneDay = 86400000;  
  
            var diffBull = Math.floor((bullDate - today) / oneDay);  
            var peakEl = document.getElementById('peak-days');  
            if (diffBull > 0) {  
                peakEl.innerHTML = diffBull + " å¤©";  
                peakEl.className = "val green";  
                peakEl.previousElementSibling.innerText = "è·ç¦»ç‰›å¸‚é¡¶ç‚¹è¿˜æœ‰";  
            } else {  
                peakEl.innerHTML = Math.abs(diffBull) + " å¤©";  
                peakEl.className = "val";  
                peakEl.previousElementSibling.innerText = "è·ç¦»ç‰›å¸‚é¡¶ç‚¹å·²è¿‡";  
            }  
  
            var diffBear = Math.ceil((bearDate - today) / oneDay);  
            document.getElementById('bear-days').innerText = diffBear + " å¤©";  
        }  
  
        // === å¤šçº¿è·¯ä»·æ ¼è·å– (å…ç¿»å¢™) ===  
        async function updatePrice() {  
            var gapEl = document.getElementById('price-gap');  
            var peakPrice = 126199;  
            var price = 0;  
              
            // 1. Mempool (ä¼˜å…ˆï¼Œå›½å†…å¯ç”¨)  
            // 2. CoinCap (å¤‡ç”¨ï¼Œå…¨çƒå¯ç”¨)  
            // 3. Binance (æœ€åï¼Œéœ€æ¢¯å­)  
            var apis = [  
                { url: 'https://mempool.space/api/v1/prices', type: 'mempool' },  
                { url: 'https://api.coincap.io/v2/assets/bitcoin', type: 'coincap' },  
                { url: 'https://api.binance.com/api/v3/ticker/price?symbol=BTCUSDT', type: 'binance' }  
            ];  
  
            for (var i = 0; i < apis.length; i++) {  
                try {  
                    var controller = new AbortController();  
                    var timeoutId = setTimeout(function() { controller.abort(); }, 3000);  
                      
                    var res = await fetch(apis[i].url, { signal: controller.signal });  
                    clearTimeout(timeoutId);  
  
                    if (res.ok) {  
                        var data = await res.json();  
                        if (apis[i].type === 'mempool') price = parseFloat(data.USD);  
                        else if (apis[i].type === 'coincap') price = parseFloat(data.data.priceUsd);  
                        else if (apis[i].type === 'binance') price = parseFloat(data.price);  
                          
                        if (price > 0) break;  
                    }  
                } catch (e) {}  
            }  
  
            if (price > 0) {  
                var diff = Math.floor(price - 38000);  
                var drop = ((peakPrice - price) / peakPrice * 100).toFixed(2);  
                gapEl.className = "val bright-red";   
                if (diff > 0) {  
                    gapEl.innerText = diff.toLocaleString() + " U (å·²è·Œ" + drop + "%)";  
                } else {  
                    gapEl.innerText = "å·²è·Œç ´åº•ä»·!";  
                }  
            } else {  
                gapEl.innerText = "è¿æ¥å¤±è´¥";  
            }  
        }  
  
        var COINS = [  
            { id: 'btc', name: 'Bitcoin', symbol: 'BTC', halving: 1050000, last: 840000, time: 600, api: 'https://mempool.space/api/blocks/tip/height', cssClass: 'bg-btc' },  
            { id: 'ltc', name: 'Litecoin', symbol: 'LTC', halving: 3360000, last: 2520000, time: 150, api: 'https://api.blockcypher.com/v1/ltc/main', cssClass: 'bg-ltc' }  
        ];  
  
        async function updateBlocks() {  
            var container = document.getElementById('app');  
            var html = '';  
  
            for (var i = 0; i < COINS.length; i++) {  
                var coin = COINS[i];  
                var height = 0;  
                var error = false;  
  
                try {  
                    var res = await fetch(coin.api);  
                    var data = await res.json();  
                    if (typeof data === 'number') height = data;  
                    else if (data.height) height = data.height;  
                } catch (e) {  
                    error = true;  
                }  
  
                if (error || height === 0) {  
                    html += '<div class="card"><div class="row"><span class="val">' + coin.name + '</span><span class="label">åŠ è½½ä¸­...</span></div></div>';  
                    continue;  
                }  
  
                var left = Math.max(0, coin.halving - height);  
                var totalSeconds = left * coin.time;  
                var totalSpan = coin.halving - coin.last;  
                var doneSpan = height - coin.last;  
                var percent = ((doneSpan / totalSpan) * 100);  
                if(percent > 100) percent = 100;  
                if(percent < 0) percent = 0;  
                var percentStr = percent.toFixed(2) + "%";  
  
                var days = Math.floor(totalSeconds / 86400);  
                var hours = Math.floor((totalSeconds % 86400) / 3600);  
                var timeText = days + "å¤© " + hours + "æ—¶";  
  
                var dateObj = new Date(new Date().getTime() + totalSeconds * 1000);  
                var dateStr = dateObj.getFullYear() + "/" +   
                              (dateObj.getMonth()+1).toString().padStart(2,'0') + "/" +   
                              dateObj.getDate().toString().padStart(2,'0') + " " +  
                              dateObj.getHours().toString().padStart(2,'0') + ":" +   
                              dateObj.getMinutes().toString().padStart(2,'0');  
  
                html += '<div class="card ' + coin.id + '">';  
                html += '<div class="row" style="margin-bottom:10px">';  
                html += '<span style="font-size:1.3rem; font-weight:bold; color:white">' + coin.name + '</span>';  
                html += '<span style="background:#30363d; padding:2px 6px; border-radius:4px; font-size:0.8rem">' + coin.symbol + '</span>';  
                html += '</div>';  
                html += '<div class="row"><span class="label">å½“å‰é«˜åº¦:</span><span class="val">#' + height.toLocaleString() + '</span></div>';  
                html += '<div class="row"><span class="label">å‡åŠé«˜åº¦:</span><span class="val">#' + coin.halving.toLocaleString() + '</span></div>';  
                html += '<div class="progress-box"><div class="progress-fill ' + coin.cssClass + '" style="width:' + percentStr + '"></div></div>';  
                html += '<div style="text-align:right; font-size:12px; color:#8b949e; margin-top:4px">' + percentStr + '</div>';  
                html += '<div class="timer-box">';  
                html += '<div class="label" style="font-size:0.9rem">é¢„è®¡å‡åŠå€’è®¡æ—¶</div>';  
                html += '<div class="big-time">' + timeText + '</div>';  
                html += '<div class="label" style="font-size:0.8rem">é¢„è®¡: ' + dateStr + '</div>';  
                html += '</div></div>';  
            }  
            container.innerHTML = html;  
        }  
  
        async function refreshData() {  
            var btn = document.getElementById('refresh-btn');  
            var oldText = btn.innerText;  
              
            btn.innerText = "â³ æ­£åœ¨åˆ·æ–°...";  
            btn.disabled = true;  
            btn.style.opacity = "0.7";  
  
            await new Promise(r => setTimeout(r, 500));  
  
            updateDate();  
            await Promise.all([updatePrice(), updateBlocks()]);  
  
            btn.innerText = "âœ… åˆ·æ–°æˆåŠŸ";  
            setTimeout(function() {  
                btn.innerText = oldText;  
                btn.disabled = false;  
                btn.style.opacity = "1";  
            }, 1000);  
        }  
  
        refreshData();  
        setInterval(refreshData, 600000);  
    </script>  
</body>  
</html>  
