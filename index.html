<!DOCTYPE html>  
<html lang="zh-CN">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">  
    <title>å¸‚åœºå‘¨æœŸç›‘æ§</title>  
    <link rel="icon" href="https://maomao837491711.github.io/jianban/jianbanlogo3.png">  
    <link rel="apple-touch-icon" sizes="180x180" href="https://maomao837491711.github.io/jianban/jianbanlogo3.png">  
    <meta name="apple-mobile-web-app-capable" content="yes">  
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">  
    <meta name="theme-color" content="#0d1117">  
  
    <style>  
        body { background-color: #0d1117; color: #c9d1d9; font-family: -apple-system, "SF Pro Text", sans-serif; margin: 0; padding: 20px 15px; display: flex; flex-direction: column; align-items: center; }  
        h1 { font-size: 1.2rem; margin-bottom: 20px; display: flex; align-items: center; gap: 8px; }  
        .container { width: 100%; max-width: 600px; display: flex; flex-direction: column; gap: 15px; }  
          
        .card { background: #161b22; border: 1px solid #30363d; border-radius: 12px; padding: 15px 20px; position: relative; overflow: hidden; }  
        .pred-card { border: 1px solid #d29922; background: linear-gradient(180deg, rgba(210, 153, 34, 0.05) 0%, #161b22 100%); }  
          
        .row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.05); align-items: center; font-size: 0.9rem; }  
        .row:last-child { border-bottom: none; }  
        .label { color: #8b949e; }  
        .val { font-family: monospace; font-weight: bold; color: #e6edf3; }  
          
        .green { color: #3fb950 !important; }  
        .red { color: #ff7b72 !important; }  
        .gold { color: #d29922 !important; }  
        .white { color: #ffffff !important; }  
        .bright-red { color: #ff3333 !important; text-shadow: 0 0 10px rgba(255, 51, 51, 0.2); }  
          
        .bg-btc { background-color: #f7931a !important; }  
        .bg-ltc { background-color: #345d9d !important; }  
        .card.btc { border-left: 4px solid #f7931a; }  
        .card.ltc { border-left: 4px solid #345d9d; }  
  
        .progress-box { margin-top: 12px; background: #21262d; border-radius: 6px; height: 8px; overflow: hidden; width: 100%; }  
        .progress-fill { height: 100%; border-radius: 6px; transition: width 0.5s; display: block; width: 0%; }  
          
        .timer-box { background: rgba(0,0,0,0.2); margin-top: 15px; padding: 15px; border-radius: 8px; text-align: center; border: 1px solid #30363d; }  
        .big-time { font-size: 1.5rem; font-weight: 800; color: #58a6ff; margin: 5px 0; letter-spacing: 0.5px; font-family: monospace; }  
          
        .btn { margin-top: 30px; padding: 12px 30px; background: #238636; color: white; border: none; border-radius: 8px; font-weight: bold; font-size: 1rem; cursor: pointer; transition: opacity 0.2s; }  
        .btn:active { opacity: 0.8; }  
        .btn:disabled { background: #30363d; color: #8b949e; cursor: not-allowed; opacity: 1; }  
        .tip { font-size: 12px; color: #484f58; margin-top: 10px; }  
          
        /* æ›´æ–°æ—¶çš„é—ªçƒ */  
        @keyframes flash { 0% { opacity: 0.6; } 100% { opacity: 1; } }  
        .updating { animation: flash 0.5s ease-out; }  
    </style>  
</head>  
<body>  
  
    <h1>ğŸ“Š å¸‚åœºå‘¨æœŸç›‘æ§</h1>  
  
    <div class="container">  
        <div class="card pred-card">  
            <div class="row" style="border-bottom:none; padding-bottom:15px;">  
                <span class="gold">ğŸ”® å‘¨æœŸé¢„æµ‹</span>  
                <span id="today-date" style="font-size:0.8rem; color:#8b949e">--/--</span>  
            </div>  
            <div class="row"><span class="label">ğŸ‚ ç‰›å¸‚é¡¶ç‚¹æ—¥æœŸ</span><span class="val green">2025-10-06</span></div>  
            <div class="row"><span class="label">ğŸ» ç†Šå¸‚ä½ç‚¹æ—¥æœŸ</span><span class="val red">2026-10-05</span></div>  
            <div class="row"><span class="label">ğŸ“ˆ æœ¬è½®ç‰›å¸‚æœ€é«˜ä»·</span><span class="val green">126,199 U</span></div>  
            <div class="row"><span class="label">ğŸ“‰ é¢„æµ‹ç†Šå¸‚ä½ç‚¹ (-70%)</span><span class="val red">38,000 U</span></div>  
            <div style="margin:10px 0; border-top:1px dashed #30363d"></div>  
            <div class="row"><span class="label">è·ç¦»ç‰›å¸‚é¡¶ç‚¹å·²è¿‡</span><span class="val" id="peak-days">--</span></div>  
            <div class="row"><span class="label">è·ç¦»ç†Šå¸‚ä½ç‚¹</span><span class="val white" id="bear-days">--</span></div>  
            <div class="row"><span class="label">è·ç¦»æœ€ä½ç‚¹è¿˜å·®</span><span class="val bright-red" id="price-gap">åŠ è½½ä¸­...</span></div>  
        </div>  
  
        <div class="card btc">  
            <div class="row" style="margin-bottom:10px">  
                <span style="font-size:1.3rem; font-weight:bold; color:white">Bitcoin</span>  
                <span style="background:#30363d; padding:2px 6px; border-radius:4px; font-size:0.8rem">BTC</span>  
            </div>  
            <div class="row"><span class="label">å½“å‰é«˜åº¦:</span><span class="val" id="btc-height">...</span></div>  
            <div class="row"><span class="label">å‡åŠé«˜åº¦:</span><span class="val">#1,050,000</span></div>  
            <div class="progress-box"><div id="btc-prog-bar" class="progress-fill bg-btc"></div></div>  
            <div style="text-align:right; font-size:12px; color:#8b949e; margin-top:4px" id="btc-prog-txt">0.00%</div>  
            <div class="timer-box">  
                <div class="label" style="font-size:0.9rem">é¢„è®¡å‡åŠå€’è®¡æ—¶</div>  
                <div class="big-time" id="btc-timer">--å¤© --æ—¶</div>  
                <div class="label" style="font-size:0.8rem" id="btc-date">é¢„è®¡: --/--</div>  
            </div>  
        </div>  
  
        <div class="card ltc">  
            <div class="row" style="margin-bottom:10px">  
                <span style="font-size:1.3rem; font-weight:bold; color:white">Litecoin</span>  
                <span style="background:#30363d; padding:2px 6px; border-radius:4px; font-size:0.8rem">LTC</span>  
            </div>  
            <div class="row"><span class="label">å½“å‰é«˜åº¦:</span><span class="val" id="ltc-height">...</span></div>  
            <div class="row"><span class="label">å‡åŠé«˜åº¦:</span><span class="val">#3,360,000</span></div>  
            <div class="progress-box"><div id="ltc-prog-bar" class="progress-fill bg-ltc"></div></div>  
            <div style="text-align:right; font-size:12px; color:#8b949e; margin-top:4px" id="ltc-prog-txt">0.00%</div>  
            <div class="timer-box">  
                <div class="label" style="font-size:0.9rem">é¢„è®¡å‡åŠå€’è®¡æ—¶</div>  
                <div class="big-time" id="ltc-timer">--å¤© --æ—¶</div>  
                <div class="label" style="font-size:0.8rem" id="ltc-date">é¢„è®¡: --/--</div>  
            </div>  
        </div>  
    </div>  
  
    <button id="refresh-btn" class="btn" onclick="manualRefresh()">ğŸ”„ æ‰‹åŠ¨åˆ·æ–°å…¨éƒ¨</button>  
    <div class="tip">ä»·æ ¼æ¯ 1 åˆ†é’Ÿè‡ªåŠ¨æ›´æ–° | ä»…åœ¨é¡µé¢æ˜¾ç¤ºæ—¶è¿è¡Œ</div>  
  
    <script>  
        const BULL_PEAK = 126199;  
        const BEAR_LOW = 38000;  
  
        // === æ—¥æœŸé€»è¾‘ ===  
        function updateDate() {  
            var now = new Date();  
            document.getElementById('today-date').innerText = now.toLocaleDateString('zh-CN');  
  
            var bullDate = new Date("2025-10-06").getTime();  
            var bearDate = new Date("2026-10-05").getTime();  
            var today = now.getTime();  
  
            var diffBull = Math.floor((bullDate - today) / 86400000);  
            var peakEl = document.getElementById('peak-days');  
            if (diffBull > 0) {  
                peakEl.innerHTML = diffBull + " å¤©";  
                peakEl.className = "val green";  
                peakEl.previousElementSibling.innerText = "è·ç¦»ç‰›å¸‚é¡¶ç‚¹è¿˜æœ‰";  
            } else {  
                peakEl.innerHTML = Math.abs(diffBull) + " å¤©";  
                peakEl.className = "val";  
                peakEl.previousElementSibling.innerText = "è·ç¦»ç‰›å¸‚é¡¶ç‚¹å·²è¿‡";  
            }  
  
            var diffBear = Math.ceil((bearDate - today) / 86400000);  
            document.getElementById('bear-days').innerText = diffBear + " å¤©";  
        }  
  
        // === ä»·æ ¼é€»è¾‘ (è°ƒæ•´é¡ºåºï¼šCoinCap -> Mempool -> Binance) ===  
        async function updatePrice() {  
            var gapEl = document.getElementById('price-gap');  
            var price = 0;  
            var timestamp = new Date().getTime();  
  
            // ğŸ† ç«é€Ÿé¡ºåºè°ƒæ•´ï¼š  
            // 1. CoinCap: ä»·æ ¼æ›´å‡†ï¼Œå…ç¿»å¢™ï¼Œæ”¾ç¬¬ä¸€ã€‚  
            // 2. Mempool: æåº¦ç¨³å®šï¼Œä½œä¸ºæœ€å¼ºå¤‡èƒã€‚  
            // 3. Binance: å¦‚æœå¼€äº†VPNï¼Œæœ€åå°è¯•å®ƒã€‚  
            var apis = [  
                { url: 'https://api.coincap.io/v2/assets/bitcoin?t=' + timestamp, type: 'coincap' },  
                { url: 'https://mempool.space/api/v1/prices?t=' + timestamp, type: 'mempool' },  
                { url: 'https://api.binance.com/api/v3/ticker/price?symbol=BTCUSDT&t=' + timestamp, type: 'binance' }  
            ];  
  
            for (var i = 0; i < apis.length; i++) {  
                try {  
                    var controller = new AbortController();  
                    var id = setTimeout(function() { controller.abort(); }, 2500);  
                    var res = await fetch(apis[i].url, { signal: controller.signal });  
                    clearTimeout(id);  
  
                    if (res.ok) {  
                        var data = await res.json();  
                        if (apis[i].type === 'mempool') price = parseFloat(data.USD);  
                        else if (apis[i].type === 'coincap') price = parseFloat(data.data.priceUsd);  
                        else if (apis[i].type === 'binance') price = parseFloat(data.price);  
                        if (price > 0) break;  
                    }  
                } catch (e) {}  
            }  
  
            if (price > 0) {  
                var diff = Math.floor(price - BEAR_LOW);  
                var drop = ((BULL_PEAK - price) / BULL_PEAK * 100).toFixed(2);  
                  
                gapEl.classList.remove('updating');  
                void gapEl.offsetWidth;   
                gapEl.classList.add('updating');  
  
                gapEl.className = "val bright-red updating";   
                if (diff > 0) gapEl.innerText = diff.toLocaleString() + " U (å·²è·Œ" + drop + "%)";  
                else gapEl.innerText = "å·²è·Œç ´åº•ä»·!";  
            }  
        }  
  
        // === åŒºå—é€»è¾‘ ===  
        async function fetchBlockHeight(url) {  
            try {  
                var controller = new AbortController();  
                var id = setTimeout(function() { controller.abort(); }, 4000);  
                var res = await fetch(url, { signal: controller.signal });  
                clearTimeout(id);  
                return await res.json();  
            } catch(e) { return null; }  
        }  
  
        async function updateBlocks() {  
            var btcHeight = await fetchBlockHeight('https://mempool.space/api/blocks/tip/height');  
            if(btcHeight) renderBlockData(btcHeight, 1050000, 840000, 600, 'btc');  
  
            var ltcData = await fetchBlockHeight('https://api.blockcypher.com/v1/ltc/main');  
            if(ltcData && ltcData.height) renderBlockData(ltcData.height, 3360000, 2520000, 150, 'ltc');  
        }  
  
        function renderBlockData(height, halving, last, time, id) {  
            document.getElementById(id + '-height').innerText = '#' + height.toLocaleString();  
            var left = Math.max(0, halving - height);  
            var totalSeconds = left * time;  
            var percent = ((height - last) / (halving - last) * 100);  
            if(percent > 100) percent = 100; if(percent < 0) percent = 0;  
              
            document.getElementById(id + '-prog-bar').style.width = percent + "%";  
            document.getElementById(id + '-prog-txt').innerText = percent.toFixed(2) + "%";  
              
            var days = Math.floor(totalSeconds / 86400);  
            var hours = Math.floor((totalSeconds % 86400) / 3600);  
            document.getElementById(id + '-timer').innerText = days + "å¤© " + hours + "æ—¶";  
  
            var d = new Date(new Date().getTime() + totalSeconds * 1000);  
            var ds = d.getFullYear() + "/" + (d.getMonth()+1).toString().padStart(2,'0') + "/" + d.getDate().toString().padStart(2,'0') + " " + d.getHours().toString().padStart(2,'0') + ":" + d.getMinutes().toString().padStart(2,'0');  
            document.getElementById(id + '-date').innerText = "é¢„è®¡: " + ds;  
        }  
  
        // === æ‰‹åŠ¨åˆ·æ–° ===  
        async function manualRefresh() {  
            var btn = document.getElementById('refresh-btn');  
            btn.innerText = "â³"; btn.disabled = true; btn.style.opacity = "0.8";  
              
            updateDate();  
            updatePrice();  
            updateBlocks();  
  
            setTimeout(function() {  
                btn.innerText = "âœ…";  
                setTimeout(function() { btn.innerText = "ğŸ”„ æ‰‹åŠ¨åˆ·æ–°å…¨éƒ¨"; btn.disabled = false; btn.style.opacity = "1"; }, 1000);  
            }, 1000);  
        }  
  
        // å¯åŠ¨  
        manualRefresh();  
  
        // å®šæ—¶ç­–ç•¥  
        setInterval(function() { if (!document.hidden) updatePrice(); }, 60000); // ä»·æ ¼1åˆ†é’Ÿ  
        setInterval(function() { if (!document.hidden) { updateBlocks(); updateDate(); } }, 600000); // åŒºå—10åˆ†é’Ÿ  
    </script>  
</body>  
</html>  
