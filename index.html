<!DOCTYPE html>  
<html lang="zh-CN">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">  
    <title>å¸‚åœºå‘¨æœŸä¸çŸ¿ä¸šç›‘æ§</title>  
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <link rel="icon" href="https://maomao837491711.github.io/jianban/jianbanlogo3.png">  
    <meta name="theme-color" content="#0d1117">  
  
    <style>  
        /* === å…¨å±€åŸºç¡€ === */
        :root { --bg: #0d1117; --card: #161b22; --border: #30363d; --text-main: #c9d1d9; --text-white: #e6edf3; --green: #3fb950; --red: #ff7b72; --gold: #d29922; }
        body { background-color: var(--bg); color: var(--text-main); font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif; margin: 0; padding: 20px 15px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; -webkit-font-smoothing: antialiased; }  
        
        /* å®¹å™¨ä¸åŠ¨ç”» */
        .container { width: 100%; max-width: 600px; display: flex; flex-direction: column; gap: 15px; transition: opacity 0.3s ease; }
        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.4s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* æ ‡é¢˜æ  */
        header { width: 100%; max-width: 600px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        h1 { font-size: 1.2rem; margin: 0; display: flex; align-items: center; gap: 8px; color: var(--text-white); }
        
        /* æŒ‰é’®é€šç”¨ */
        .btn-nav { background: transparent; border: 1px solid var(--border); color: #58a6ff; padding: 6px 12px; border-radius: 8px; font-size: 0.85rem; cursor: pointer; display: flex; align-items: center; gap: 5px; }
        .btn-main { width: 100%; padding: 12px; background: #238636; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .btn-entry { width: 100%; padding: 15px; background: linear-gradient(145deg, #1f242c, #161b22); border: 1px solid var(--border); color: var(--text-white); border-radius: 12px; font-weight: bold; cursor: pointer; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 12px rgba(0,0,0,0.2); margin-top: 10px; }
        .btn-entry:active { transform: scale(0.98); }

        /* === é€šç”¨å¡ç‰‡æ ·å¼ === */
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 15px 20px; position: relative; overflow: hidden; }  
        .row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.05); align-items: center; font-size: 0.9rem; }  
        .row:last-child { border-bottom: none; }  
        .label { color: #8b949e; }  
        .val { font-family: monospace; font-weight: bold; color: var(--text-white); }  

        /* é¢œè‰²ç±» */
        .green { color: var(--green) !important; }  
        .red { color: var(--red) !important; }  
        .gold { color: var(--gold) !important; }  
        .white { color: var(--text-white) !important; }  
        .bright-red { color: #ff3333 !important; text-shadow: 0 0 10px rgba(255, 51, 51, 0.2); }  

        /* é¦–é¡µç‰¹æœ‰ï¼šå‘¨æœŸå¡ç‰‡ */
        .pred-card { border: 1px solid var(--gold); background: linear-gradient(180deg, rgba(210, 153, 34, 0.05) 0%, var(--card) 100%); }
        .card.btc { border-left: 4px solid #f7931a; }  
        .card.ltc { border-left: 4px solid #345d9d; }  
        .progress-box { margin-top: 12px; background: #21262d; border-radius: 6px; height: 8px; overflow: hidden; width: 100%; }  
        .progress-fill { height: 100%; border-radius: 6px; transition: width 0.5s; display: block; width: 0%; }
        .bg-btc { background-color: #f7931a !important; }  
        .bg-ltc { background-color: #345d9d !important; }  
        .timer-box { background: rgba(0,0,0,0.2); margin-top: 15px; padding: 15px; border-radius: 8px; text-align: center; border: 1px solid var(--border); }  
        .big-time { font-size: 1.5rem; font-weight: 800; color: #58a6ff; margin: 5px 0; letter-spacing: 0.5px; font-family: monospace; } 

        /* === çŸ¿æœºé¡µé¢ç‰¹æœ‰æ ·å¼ === */
        .miner-list { display: flex; flex-direction: column; gap: 12px; }
        .miner-card { background: var(--card); border: 1px solid var(--border); border-radius: 10px; padding: 14px; position: relative; overflow: hidden; display: flex; flex-direction: column; gap: 8px; }
        
        .category-bar { position: absolute; left: 0; top: 0; bottom: 0; width: 4px; }
        .cat-support { background: #d9822b; } 
        .cat-gold { background: #f1c40f; } 
        .cat-diamond { background: #3498db; } 

        .badge { font-size: 0.65rem; font-weight: 700; padding: 2px 6px; border-radius: 4px; margin-left: 6px; border: 1px solid transparent; vertical-align: text-bottom; }
        .badge-support { background: rgba(217, 130, 43, 0.1); color: #d9822b; border-color: rgba(217, 130, 43, 0.2); }
        .badge-gold { background: rgba(241, 196, 15, 0.1); color: #f1c40f; border-color: rgba(241, 196, 15, 0.2); }
        .badge-diamond { background: rgba(52, 152, 219, 0.1); color: #3498db; border-color: rgba(52, 152, 219, 0.2); }

        .miner-header { display: flex; justify-content: space-between; align-items: center; }
        .miner-name { font-weight: 700; font-size: 0.95rem; color: var(--text-white); }
        .miner-spec { font-size: 0.75rem; color: #8b949e; }
        .shutdown-price { font-family: monospace; font-size: 1.2rem; font-weight: 800; }
        
        .status-text { font-size: 0.8rem; font-weight: bold; text-align: right; }
        .status-sub { font-size: 0.65rem; color: #8b949e; text-align: right; }
        
        .col-green { color: var(--green); }
        .col-warn { color: var(--gold); }
        .col-danger { color: var(--red); animation: flashRed 2s infinite; }
        @keyframes flashRed { 0%,100% { opacity: 1; } 50% { opacity: 0.6; } }

        /* åº•éƒ¨ä¸æ‚é¡¹ */
        .update-time { font-size: 0.7rem; color: #8b949e; margin-top: 8px; text-align: center; }  
        .pulse-dot { display: inline-block; width: 6px; height: 6px; border-radius: 50%; background-color: var(--green); margin-right: 5px; opacity: 0.5; }
        .active .pulse-dot { opacity: 1; box-shadow: 0 0 5px var(--green); }
        
        .legend { font-size: 0.7rem; color: #6e7681; margin-top: 15px; background: #13171d; padding: 15px; border-radius: 8px; line-height: 1.6; border: 1px solid #21262d; }
    </style>  
</head>  
<body>  
  
    <header>
        <h1 id="page-title">ğŸ“Š å¸‚åœºå‘¨æœŸç›‘æ§</h1>
        <!-- è¿”å›æŒ‰é’®ï¼ˆé»˜è®¤éšè—ï¼‰ -->
        <button id="back-btn" class="btn-nav hidden" onclick="switchView('cycle')">
            <span>â†©</span> è¿”å›
        </button>
    </header>  
  
    <!-- ================= è§†å›¾ 1: å‘¨æœŸç›‘æ§ (é»˜è®¤) ================= -->
    <div id="view-cycle" class="container fade-in">  
        
        <!-- å‘¨æœŸé¢„æµ‹å¡ç‰‡ -->
        <div class="card pred-card">  
            <div class="row" style="border-bottom:none; padding-bottom:15px;">  
                <span class="gold">ğŸ”® å‘¨æœŸé¢„æµ‹</span>  
                <span id="today-date" style="font-size:0.8rem; color:#8b949e">--/--</span>  
            </div>  
            <div class="row"><span class="label">ğŸ‚ ç‰›å¸‚é¡¶ç‚¹æ—¥æœŸ</span><span class="val green">2025-10-06</span></div>  
            <div class="row"><span class="label">ğŸ» ç†Šå¸‚ä½ç‚¹æ—¥æœŸ</span><span class="val red">2026-10-05</span></div>  
            <div class="row"><span class="label">ğŸ“ˆ æœ¬è½®é¢„æµ‹é¡¶</span><span class="val green">126,199 U</span></div>  
            <div class="row"><span class="label">ğŸ“‰ é¢„æµ‹ç†Šå¸‚åº•</span><span class="val red">38,000 U</span></div>  
            <div style="margin:10px 0; border-top:1px dashed #30363d"></div>  
            <div class="row"><span class="label">è·ç¦»ç‰›å¸‚é¡¶ç‚¹</span><span class="val" id="peak-days">--</span></div>  
            <div class="row"><span class="label">è·ç¦»ç†Šå¸‚ä½ç‚¹</span><span class="val white" id="bear-days">--</span></div>  
            
            <div class="row">  
                <span class="label">å½“å‰ä»·æ ¼è·ç¦»åº•ä»·</span>  
                <div style="text-align:right">  
                    <span class="val bright-red" id="price-gap">åŠ è½½ä¸­...</span>  
                </div>  
            </div>  
        </div>  
  
        <!-- BTC å¡ç‰‡ -->
        <div class="card btc">  
            <div class="row" style="margin-bottom:5px">  
                <span style="font-size:1.2rem; font-weight:bold; color:white">Bitcoin</span>  
                <span class="val" id="btc-height">Loading...</span>  
            </div>  
            <div class="progress-box"><div id="btc-prog-bar" class="progress-fill bg-btc"></div></div>  
            <div style="text-align:right; font-size:12px; color:#8b949e; margin-top:4px" id="btc-prog-txt">0.00%</div>  
            <div class="timer-box">  
                <div class="label" style="font-size:0.8rem">ä¸‹ä¸€è½®å‡åŠå€’è®¡æ—¶</div>  
                <div class="big-time" id="btc-timer">--å¤© --æ—¶</div>  
                <div class="label" style="font-size:0.75rem" id="btc-date">é¢„è®¡: --/--</div>  
            </div>  
        </div>  
  
        <!-- LTC å¡ç‰‡ -->
        <div class="card ltc">  
            <div class="row" style="margin-bottom:5px">  
                <span style="font-size:1.2rem; font-weight:bold; color:white">Litecoin</span>  
                <span class="val" id="ltc-height">Loading...</span>  
            </div>  
            <div class="progress-box"><div id="ltc-prog-bar" class="progress-fill bg-ltc"></div></div>  
            <div style="text-align:right; font-size:12px; color:#8b949e; margin-top:4px" id="ltc-prog-txt">0.00%</div>  
            <div class="timer-box">  
                 <div class="label" style="font-size:0.8rem">ä¸‹ä¸€è½®å‡åŠå€’è®¡æ—¶</div>  
                 <div class="big-time" id="ltc-timer">--å¤© --æ—¶</div>  
                 <div class="label" style="font-size:0.75rem" id="ltc-date">é¢„è®¡: --/--</div>  
            </div>
        </div>  

        <!-- æ ¸å¿ƒå…¥å£æŒ‰é’® -->
        <button class="btn-entry" onclick="switchView('mining')">
            <div style="display:flex; align-items:center; gap:10px;">
                <span style="font-size:1.5rem">â›ï¸</span>
                <div style="text-align:left">
                    <div style="font-size:1rem;">çŸ¿æœºé£æ§é›·è¾¾</div>
                    <div style="font-size:0.7rem; color:#8b949e; font-weight:normal">æŸ¥è¯¢å…³æœºä»· / æŠ„åº•ä¿¡å·ç¯</div>
                </div>
            </div>
            <span style="color:#58a6ff">è¿›å…¥ â€º</span>
        </button>

    </div> 
    
    <!-- ================= è§†å›¾ 2: çŸ¿æœºå…³æœºä»· (é»˜è®¤éšè—) ================= -->
    <div id="view-mining" class="container hidden">
        
        <!-- é¡¶éƒ¨ä¿¡æ¯æ¡ -->
        <div class="card" style="padding:15px; background: linear-gradient(145deg, #1f242c, #161b22);">
            <div class="row" style="border:none; padding:0;">
                <span class="label">å½“å‰å¸ä»· (CoinCap)</span>
                <span class="val white" id="mining-live-price" style="font-size:1.2rem">$--,--</span>
            </div>
            <div class="row" style="border:none; padding:5px 0 0 0;">
                <span class="label">å…¨ç½‘éš¾åº¦ (Mempool)</span>
                <span class="val gold" id="network-diff">Loading...</span>
            </div>
            <div class="row" style="border:none; padding:5px 0 0 0;">
                <span class="label">åŸºå‡†ç”µè´¹ (å·¥ä¸š)</span>
                <span class="val" style="color:#8b949e">$0.06 / kWh</span>
            </div>
        </div>

        <!-- çŸ¿æœºåˆ—è¡¨ -->
        <div id="miner-list" class="miner-list">
            <!-- JS è‡ªåŠ¨æ¸²æŸ“ -->
        </div>

        <!-- å›¾ä¾‹ -->
        <div class="legend">
            <div style="color:#c9d1d9; margin-bottom:4px; font-weight:bold">ğŸ“Œ æŠ„åº•ä¿¡å·è¯´æ˜</div>
            <div>ğŸ§± <strong>ç¬¬ä¸€æ”¯æ’‘ (S19 Pro)</strong>: è€æ—§äº§èƒ½å…³æœºçº¿ã€‚è·Œç ´æ­¤çº¿ï¼Œç†Šå¸‚åº•éƒ¨ç‰¹å¾æ˜¾ç°ï¼Œé€‚åˆå®šæŠ•ã€‚</div>
            <div style="margin-top:4px">ğŸ† <strong>é»„é‡‘å‘ (S19 XP)</strong>: ä¸»åŠ›æœºå‹æˆæœ¬çº¿ã€‚è‹¥è·Œç ´ï¼Œå¸‚åœºæåº¦ææ…Œï¼Œé»„é‡‘ä¹°ç‚¹ã€‚</div>
            <div style="margin-top:4px">ğŸ’ <strong>é’»çŸ³å‘ (S21)</strong>: æé™æˆæœ¬çº¿ã€‚è‹¥è·Œç ´ï¼Œå…¨ç½‘äºæŸï¼Œé»‘å¤©é¹…æœºä¼šã€‚</div>
        </div>
    </div>

    <!-- åº•éƒ¨çŠ¶æ€æ  -->
    <div class="update-time">
        <span class="active"><span class="pulse-dot"></span></span>
        <span id="last-update-txt">ç­‰å¾…æ•°æ®åŒæ­¥...</span>
    </div>

    <script>  
        // === æ ¸å¿ƒé…ç½® ===
        const CONFIG = {
            elecCost: 0.06,
            blockReward: 3.125,
            bullPeak: 126199,
            bearLow: 38000,
            // çŸ¿æœºæ•°æ®åº“
            miners: [
                { name: "Antminer S19 Pro", hash: 110, watts: 3250, cat: "support", badge: "ğŸ§± ç¬¬ä¸€æ”¯æ’‘" },
                { name: "WhatsMiner M30S++", hash: 112, watts: 3472, cat: "support", badge: "ğŸ§± ç¬¬ä¸€æ”¯æ’‘" },
                { name: "Antminer S19 XP", hash: 141, watts: 3031, cat: "gold", badge: "ğŸ† é»„é‡‘å‘" },
                { name: "Antminer S19k Pro", hash: 120, watts: 2760, cat: "gold", badge: "ğŸ† é»„é‡‘å‘" },
                { name: "Antminer S21", hash: 200, watts: 3500, cat: "diamond", badge: "ğŸ’ é’»çŸ³å‘" },
                { name: "WhatsMiner M60S", hash: 186, watts: 3441, cat: "diamond", badge: "ğŸ’ é’»çŸ³å‘" }
            ]
        };

        // === å…¨å±€çŠ¶æ€ ===
        let state = {
            view: 'cycle', // cycle æˆ– mining
            price: 0,
            btcDifficulty: 0,
            btcHeight: 0,
            ltcHeight: 0
        };

        // === è§†å›¾åˆ‡æ¢é€»è¾‘ ===
        function switchView(viewName) {
            const vCycle = document.getElementById('view-cycle');
            const vMining = document.getElementById('view-mining');
            const title = document.getElementById('page-title');
            const backBtn = document.getElementById('back-btn');

            state.view = viewName;

            if (viewName === 'mining') {
                vCycle.classList.add('hidden');
                vMining.classList.remove('hidden');
                vMining.classList.add('fade-in');
                title.innerText = "ğŸ¯ çŸ¿æœºé£æ§é›·è¾¾";
                backBtn.classList.remove('hidden');
                // åˆ‡æ¢æ—¶ç«‹å³æ¸²æŸ“ä¸€æ¬¡åˆ—è¡¨ï¼ˆå¦‚æœæœ‰æ•°æ®ï¼‰
                if(state.price > 0 && state.btcDifficulty > 0) renderMinerList();
            } else {
                vMining.classList.add('hidden');
                vCycle.classList.remove('hidden');
                vCycle.classList.add('fade-in');
                title.innerText = "ğŸ“Š å¸‚åœºå‘¨æœŸç›‘æ§";
                backBtn.classList.add('hidden');
            }
        }

        // === 1. æ•°æ®è·å–ï¼šä»·æ ¼ (CoinCap - æ— éœ€æ¢¯å­) ===
        async function fetchPrice() {
            try {
                const controller = new AbortController();
                const id = setTimeout(() => controller.abort(), 5000);
                const res = await fetch('https://api.coincap.io/v2/assets/bitcoin', { signal: controller.signal });
                clearTimeout(id);
                
                if(res.ok) {
                    const data = await res.json();
                    state.price = parseFloat(data.data.priceUsd);
                    updateGlobalUI();
                }
            } catch(e) { console.log("Price fetch failed"); }
        }

        // === 2. æ•°æ®è·å–ï¼šåŒºå—ä¸éš¾åº¦ (Mempool/BlockCypher) ===
        async function fetchChainData() {
            // BTC: éš¾åº¦ & é«˜åº¦ (Mempool)
            try {
                let r1 = await fetch('https://mempool.space/api/blocks/tip/height');
                if(r1.ok) state.btcHeight = await r1.json();
                
                let r2 = await fetch('https://mempool.space/api/blocks/tip/hash');
                let hash = await r2.text();
                let r3 = await fetch('https://mempool.space/api/block/' + hash);
                let blockData = await r3.json();
                state.btcDifficulty = blockData.difficulty;
            } catch(e) {}

            // LTC: é«˜åº¦ (BlockCypher)
            try {
                let r = await fetch('https://api.blockcypher.com/v1/ltc/main');
                if(r.ok) {
                    let d = await r.json();
                    state.ltcHeight = d.height;
                }
            } catch(e) {}
            
            updateGlobalUI();
        }

        // === 3. UI æ›´æ–°æ€»æ§ ===
        function updateGlobalUI() {
            // æ›´æ–°åº•éƒ¨æ—¶é—´
            const now = new Date();
            document.getElementById('last-update-txt').innerText = "æ›´æ–°äº " + now.toTimeString().split(' ')[0];

            // === æ›´æ–°å‘¨æœŸé¡µé¢æ•°æ® ===
            updateDateLogic();
            if(state.price > 0) {
                // å‘¨æœŸé¡µé¢çš„ä»·å·®
                let diff = Math.floor(state.price - CONFIG.bearLow);
                let gapEl = document.getElementById('price-gap');
                if(diff > 0) {
                    let drop = ((CONFIG.bullPeak - state.price)/CONFIG.bullPeak*100).toFixed(1);
                    gapEl.innerText = `${diff.toLocaleString()} U (è·é«˜ç‚¹ -${drop}%)`;
                } else {
                    gapEl.innerText = "âš ï¸ å·²è·Œç ´é¢„æµ‹åº•ä»·";
                }
            }
            // æ›´æ–°è¿›åº¦æ¡
            if(state.btcHeight > 0) renderProgressBar(state.btcHeight, 1050000, 840000, 600, 'btc');
            if(state.ltcHeight > 0) renderProgressBar(state.ltcHeight, 3360000, 2520000, 150, 'ltc');

            // === æ›´æ–°çŸ¿æœºé¡µé¢æ•°æ® ===
            if(state.price > 0) {
                document.getElementById('mining-live-price').innerText = "$" + Math.floor(state.price).toLocaleString();
            }
            if(state.btcDifficulty > 0) {
                document.getElementById('network-diff').innerText = (state.btcDifficulty/1e12).toFixed(2) + " T";
            }
            // å¦‚æœçŸ¿æœºæ•°æ®é½å…¨ï¼Œæ¸²æŸ“åˆ—è¡¨
            if(state.price > 0 && state.btcDifficulty > 0) {
                renderMinerList();
            }
        }

        // === è¾…åŠ©åŠŸèƒ½ï¼šå‘¨æœŸæ—¥æœŸé€»è¾‘ ===
        function updateDateLogic() {
            const now = new Date();
            document.getElementById('today-date').innerText = now.toLocaleDateString('zh-CN');
            
            const bullDate = new Date("2025-10-06").getTime();
            const bearDate = new Date("2026-10-05").getTime();
            const today = now.getTime();
            
            const diffBull = Math.floor((bullDate - today) / 86400000);
            const peakEl = document.getElementById('peak-days');
            if (diffBull > 0) {
                peakEl.innerHTML = diffBull + " å¤©";
                peakEl.className = "val green";
                peakEl.previousElementSibling.innerText = "è·ç¦»ç‰›å¸‚é¡¶ç‚¹è¿˜æœ‰";
            } else {
                peakEl.innerHTML = Math.abs(diffBull) + " å¤©";
                peakEl.className = "val";
                peakEl.previousElementSibling.innerText = "è·ç¦»ç‰›å¸‚é¡¶ç‚¹å·²è¿‡";
            }
            
            const diffBear = Math.ceil((bearDate - today) / 86400000);
            document.getElementById('bear-days').innerText = diffBear + " å¤©";
        }

        // === è¾…åŠ©åŠŸèƒ½ï¼šæ¸²æŸ“è¿›åº¦æ¡ ===
        function renderProgressBar(height, halving, last, timePerBlock, id) {
            document.getElementById(id + '-height').innerText = '#' + height.toLocaleString();
            let percent = ((height - last) / (halving - last) * 100);
            if(percent > 100) percent = 100; if(percent < 0) percent = 0;
            
            document.getElementById(id + '-prog-bar').style.width = percent + "%";
            document.getElementById(id + '-prog-txt').innerText = percent.toFixed(2) + "%";
            
            let leftBlocks = halving - height;
            let totalSeconds = leftBlocks * timePerBlock;
            let days = Math.floor(totalSeconds / 86400);
            let hours = Math.floor((totalSeconds % 86400) / 3600);
            document.getElementById(id + '-timer').innerText = days + "å¤© " + hours + "æ—¶";
            
            let d = new Date(Date.now() + totalSeconds * 1000);
            document.getElementById(id + '-date').innerText = "é¢„è®¡: " + d.getFullYear() + "/" + (d.getMonth()+1) + "/" + d.getDate();
        }

        // === è¾…åŠ©åŠŸèƒ½ï¼šæ¸²æŸ“çŸ¿æœºåˆ—è¡¨ (æ ¸å¿ƒé£æ§é€»è¾‘) ===
        function renderMinerList() {
            const list = document.getElementById('miner-list');
            list.innerHTML = "";

            // ç‰©ç†å…¬å¼è®¡ç®—æ—¥äº§å‡º
            // BTC = (Reward * 86400 * 1e12) / (Diff * 2^32)
            const btcPerTH = (CONFIG.blockReward * 86400 * 1000000000000) / (state.btcDifficulty * 4294967296);

            let data = CONFIG.miners.map(m => {
                let dailyRev = m.hash * btcPerTH;
                let dailyCost = (m.watts / 1000) * 24 * CONFIG.elecCost;
                let shutdown = dailyCost / dailyRev;
                return { ...m, shutdown };
            });

            // æ’åºï¼šå…³æœºä»·é«˜çš„åœ¨ä¸Šé¢
            data.sort((a, b) => b.shutdown - a.shutdown);

            data.forEach(m => {
                let gap = state.price - m.shutdown;
                let isBroken = gap <= 0;
                let gapPct = Math.abs(gap/state.price*100).toFixed(1);
                
                let statusHtml = "";
                let priceClass = "white";
                let borderStyle = `cat-${m.cat}`;

                if (isBroken) {
                    priceClass = "col-danger";
                    statusHtml = `<div class="status-text col-danger">âš ï¸ å·²è·Œç ´</div><div class="status-sub">ä¿¡å·è§¦å‘</div>`;
                } else {
                    let isClose = (gap/state.price) < 0.15;
                    let color = isClose ? "col-warn" : "col-green";
                    statusHtml = `<div class="status-text ${color}">è· ${Math.floor(gap).toLocaleString()} U</div><div class="status-sub">éœ€è·Œ -${gapPct}%</div>`;
                }

                let html = `
                    <div class="miner-card">
                        <div class="category-bar ${borderStyle}"></div>
                        <div style="padding-left:10px">
                            <div class="miner-header">
                                <div><span class="miner-name">${m.name}</span><span class="badge badge-${m.cat}">${m.badge}</span></div>
                                <span class="miner-spec">${m.hash}T / ${m.watts}W</span>
                            </div>
                            <div class="miner-header" style="margin-top:8px; align-items:flex-end">
                                <div>
                                    <span class="label" style="font-size:0.7rem; display:block">å…³æœºä»·</span>
                                    <span class="shutdown-price ${priceClass}">$${Math.floor(m.shutdown).toLocaleString()}</span>
                                </div>
                                <div>${statusHtml}</div>
                            </div>
                        </div>
                    </div>
                `;
                list.insertAdjacentHTML('beforeend', html);
            });
        }

        // === å¯åŠ¨ ===
        (function init() {
            updateDateLogic();
            fetchPrice();
            fetchChainData();
            
            // 10ç§’åˆ·æ–°ä»·æ ¼
            setInterval(fetchPrice, 10000);
            // 5åˆ†é’Ÿåˆ·æ–°é“¾ä¸Šæ•°æ®
            setInterval(fetchChainData, 300000);
        })();
    </script>  
</body>  
</html>
